このコードでは、文字列リテラルが書き換えられている。よって、書き換えられない形に改める必要がある。

そのため、ポインタの代わりに、得られる文字数が確保される配列の型をはじめに用意してやり、そこにscanした値をぶちこむ、という方法をとってやればよい。